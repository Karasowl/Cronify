module.exports=[13749,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749)},50522,a=>{"use strict";var b=a.i(11989);a.s(["ChevronRight",()=>b.default])},23025,65151,85259,10775,a=>{"use strict";let b,c=(0,a.i(70106).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);a.s(["Minus",()=>c],23025);var d=a.i(9615);a.s(["Circle",()=>d.default],65151);var e=a.i(87924),f=a.i(72131),g=a.i(7554),h=a.i(70121),i=a.i(96743),j=a.i(92843),k=a.i(4691),l=a.i(92616),m=a.i(77192);a.i(35112);var n=Symbol("radix.slottable");function o(a){return f.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===n}var p=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{var c,d;let g,i,j,k=(d=c=`Primitive.${b}`,(g=f.forwardRef((a,b)=>{let{children:c,...d}=a;if(f.isValidElement(c)){var e;let a,g,i=(e=c,(g=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(g=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==f.Fragment&&(j.ref=b?(0,h.composeRefs)(b,i):i),f.cloneElement(c,j)}return f.Children.count(c)>1?f.Children.only(null):null})).displayName=`${d}.SlotClone`,i=g,(j=f.forwardRef((a,b)=>{let{children:c,...d}=a,g=f.Children.toArray(c),h=g.find(o);if(h){let a=h.props.children,c=g.map(b=>b!==h?b:f.Children.count(a)>1?f.Children.only(null):f.isValidElement(a)?a.props.children:null);return(0,e.jsx)(i,{...d,ref:b,children:f.isValidElement(a)?f.cloneElement(a,void 0,c):null})}return(0,e.jsx)(i,{...d,ref:b,children:c})})).displayName=`${c}.Slot`,j),l=f.forwardRef((a,c)=>{let{asChild:d,...f}=a;return(0,e.jsx)(d?k:b,{...f,ref:c})});return l.displayName=`Primitive.${b}`,{...a,[b]:l}},{}),q=a.i(25152),r=Symbol("radix.slottable");function s(a){return f.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===r}var t=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{var c,d;let g,i,j,k=(d=c=`Primitive.${b}`,(g=f.forwardRef((a,b)=>{let{children:c,...d}=a;if(f.isValidElement(c)){var e;let a,g,i=(e=c,(g=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(g=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==f.Fragment&&(j.ref=b?(0,h.composeRefs)(b,i):i),f.cloneElement(c,j)}return f.Children.count(c)>1?f.Children.only(null):null})).displayName=`${d}.SlotClone`,i=g,(j=f.forwardRef((a,b)=>{let{children:c,...d}=a,g=f.Children.toArray(c),h=g.find(s);if(h){let a=h.props.children,c=g.map(b=>b!==h?b:f.Children.count(a)>1?f.Children.only(null):f.isValidElement(a)?a.props.children:null);return(0,e.jsx)(i,{...d,ref:b,children:f.isValidElement(a)?f.cloneElement(a,void 0,c):null})}return(0,e.jsx)(i,{...d,ref:b,children:c})})).displayName=`${c}.Slot`,j),l=f.forwardRef((a,c)=>{let{asChild:d,...f}=a;return(0,e.jsx)(d?k:b,{...f,ref:c})});return l.displayName=`Primitive.${b}`,{...a,[b]:l}},{}),u=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),v=f.forwardRef((a,b)=>(0,e.jsx)(t.span,{...a,ref:b,style:{...u,...a.style}}));v.displayName="VisuallyHidden";var[w,x]=function(a,b=[]){let c=[],d=()=>{let b=c.map(a=>f.createContext(a));return function(c){let d=c?.[a]||b;return f.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let g=f.createContext(d),h=c.length;c=[...c,d];let i=b=>{let{scope:c,children:d,...i}=b,j=c?.[a]?.[h]||g,k=f.useMemo(()=>i,Object.values(i));return(0,e.jsx)(j.Provider,{value:k,children:d})};return i.displayName=b+"Provider",[i,function(c,e){let i=e?.[a]?.[h]||g,j=f.useContext(i);if(j)return j;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return f.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}("Tooltip",[k.createPopperScope]),y=(0,k.createPopperScope)(),z="TooltipProvider",A="tooltip.open",[B,C]=w(z),D=a=>{let{__scopeTooltip:b,delayDuration:c=700,skipDelayDuration:d=300,disableHoverableContent:g=!1,children:h}=a,i=f.useRef(!0),j=f.useRef(!1),k=f.useRef(0);return f.useEffect(()=>{let a=k.current;return()=>window.clearTimeout(a)},[]),(0,e.jsx)(B,{scope:b,isOpenDelayedRef:i,delayDuration:c,onOpen:f.useCallback(()=>{window.clearTimeout(k.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(k.current),k.current=window.setTimeout(()=>i.current=!0,d)},[d]),isPointerInTransitRef:j,onPointerInTransitChange:f.useCallback(a=>{j.current=a},[]),disableHoverableContent:g,children:h})};D.displayName=z;var E="Tooltip",[F,G]=w(E),H=a=>{let{__scopeTooltip:b,children:c,open:d,defaultOpen:g,onOpenChange:h,disableHoverableContent:i,delayDuration:l}=a,m=C(E,a.__scopeTooltip),n=y(b),[o,p]=f.useState(null),r=(0,j.useId)(),s=f.useRef(0),t=i??m.disableHoverableContent,u=l??m.delayDuration,v=f.useRef(!1),[w,x]=(0,q.useControllableState)({prop:d,defaultProp:g??!1,onChange:a=>{a?(m.onOpen(),document.dispatchEvent(new CustomEvent(A))):m.onClose(),h?.(a)},caller:E}),z=f.useMemo(()=>w?v.current?"delayed-open":"instant-open":"closed",[w]),B=f.useCallback(()=>{window.clearTimeout(s.current),s.current=0,v.current=!1,x(!0)},[x]),D=f.useCallback(()=>{window.clearTimeout(s.current),s.current=0,x(!1)},[x]),G=f.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(()=>{v.current=!0,x(!0),s.current=0},u)},[u,x]);return f.useEffect(()=>()=>{s.current&&(window.clearTimeout(s.current),s.current=0)},[]),(0,e.jsx)(k.Root,{...n,children:(0,e.jsx)(F,{scope:b,contentId:r,open:w,stateAttribute:z,trigger:o,onTriggerChange:p,onTriggerEnter:f.useCallback(()=>{m.isOpenDelayedRef.current?G():B()},[m.isOpenDelayedRef,G,B]),onTriggerLeave:f.useCallback(()=>{t?D():(window.clearTimeout(s.current),s.current=0)},[D,t]),onOpen:B,onClose:D,disableHoverableContent:t,children:c})})};H.displayName=E;var I="TooltipTrigger",J=f.forwardRef((a,b)=>{let{__scopeTooltip:c,...d}=a,i=G(I,c),j=C(I,c),l=y(c),m=f.useRef(null),n=(0,h.useComposedRefs)(b,m,i.onTriggerChange),o=f.useRef(!1),q=f.useRef(!1),r=f.useCallback(()=>o.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",r),[r]),(0,e.jsx)(k.Anchor,{asChild:!0,...l,children:(0,e.jsx)(p.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...d,ref:n,onPointerMove:(0,g.composeEventHandlers)(a.onPointerMove,a=>{"touch"!==a.pointerType&&(q.current||j.isPointerInTransitRef.current||(i.onTriggerEnter(),q.current=!0))}),onPointerLeave:(0,g.composeEventHandlers)(a.onPointerLeave,()=>{i.onTriggerLeave(),q.current=!1}),onPointerDown:(0,g.composeEventHandlers)(a.onPointerDown,()=>{i.open&&i.onClose(),o.current=!0,document.addEventListener("pointerup",r,{once:!0})}),onFocus:(0,g.composeEventHandlers)(a.onFocus,()=>{o.current||i.onOpen()}),onBlur:(0,g.composeEventHandlers)(a.onBlur,i.onClose),onClick:(0,g.composeEventHandlers)(a.onClick,i.onClose)})})});J.displayName=I;var K="TooltipPortal",[L,M]=w(K,{forceMount:void 0}),N=a=>{let{__scopeTooltip:b,forceMount:c,children:d,container:f}=a,g=G(K,b);return(0,e.jsx)(L,{scope:b,forceMount:c,children:(0,e.jsx)(m.Presence,{present:c||g.open,children:(0,e.jsx)(l.Portal,{asChild:!0,container:f,children:d})})})};N.displayName=K;var O="TooltipContent",P=f.forwardRef((a,b)=>{let c=M(O,a.__scopeTooltip),{forceMount:d=c.forceMount,side:f="top",...g}=a,h=G(O,a.__scopeTooltip);return(0,e.jsx)(m.Presence,{present:d||h.open,children:h.disableHoverableContent?(0,e.jsx)(U,{side:f,...g,ref:b}):(0,e.jsx)(Q,{side:f,...g,ref:b})})}),Q=f.forwardRef((a,b)=>{let c=G(O,a.__scopeTooltip),d=C(O,a.__scopeTooltip),g=f.useRef(null),i=(0,h.useComposedRefs)(b,g),[j,k]=f.useState(null),{trigger:l,onClose:m}=c,n=g.current,{onPointerInTransitChange:o}=d,p=f.useCallback(()=>{k(null),o(!1)},[o]),q=f.useCallback((a,b)=>{let c,d=a.currentTarget,e={x:a.clientX,y:a.clientY},f=function(a,b){let c=Math.abs(b.top-a.y),d=Math.abs(b.bottom-a.y),e=Math.abs(b.right-a.x),f=Math.abs(b.left-a.x);switch(Math.min(c,d,e,f)){case f:return"left";case e:return"right";case c:return"top";case d:return"bottom";default:throw Error("unreachable")}}(e,d.getBoundingClientRect());k(((c=[...function(a,b,c=5){let d=[];switch(b){case"top":d.push({x:a.x-c,y:a.y+c},{x:a.x+c,y:a.y+c});break;case"bottom":d.push({x:a.x-c,y:a.y-c},{x:a.x+c,y:a.y-c});break;case"left":d.push({x:a.x+c,y:a.y-c},{x:a.x+c,y:a.y+c});break;case"right":d.push({x:a.x-c,y:a.y-c},{x:a.x-c,y:a.y+c})}return d}(e,f),...function(a){let{top:b,right:c,bottom:d,left:e}=a;return[{x:e,y:b},{x:c,y:b},{x:c,y:d},{x:e,y:d}]}(b.getBoundingClientRect())].slice()).sort((a,b)=>a.x<b.x?-1:a.x>b.x?1:a.y<b.y?-1:1*!!(a.y>b.y)),function(a){if(a.length<=1)return a.slice();let b=[];for(let c=0;c<a.length;c++){let d=a[c];for(;b.length>=2;){let a=b[b.length-1],c=b[b.length-2];if((a.x-c.x)*(d.y-c.y)>=(a.y-c.y)*(d.x-c.x))b.pop();else break}b.push(d)}b.pop();let c=[];for(let b=a.length-1;b>=0;b--){let d=a[b];for(;c.length>=2;){let a=c[c.length-1],b=c[c.length-2];if((a.x-b.x)*(d.y-b.y)>=(a.y-b.y)*(d.x-b.x))c.pop();else break}c.push(d)}return(c.pop(),1===b.length&&1===c.length&&b[0].x===c[0].x&&b[0].y===c[0].y)?b:b.concat(c)}(c))),o(!0)},[o]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(l&&n){let a=a=>q(a,n),b=a=>q(a,l);return l.addEventListener("pointerleave",a),n.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",a),n.removeEventListener("pointerleave",b)}}},[l,n,q,p]),f.useEffect(()=>{if(j){let a=a=>{let b=a.target,c={x:a.clientX,y:a.clientY},d=l?.contains(b)||n?.contains(b),e=!function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}(c,j);d?p():e&&(p(),m())};return document.addEventListener("pointermove",a),()=>document.removeEventListener("pointermove",a)}},[l,n,j,m,p]),(0,e.jsx)(U,{...a,ref:i})}),[R,S]=w(E,{isInside:!1}),T=((b=({children:a})=>(0,e.jsx)(e.Fragment,{children:a})).displayName="TooltipContent.Slottable",b.__radixId=n,b),U=f.forwardRef((a,b)=>{let{__scopeTooltip:c,children:d,"aria-label":g,onEscapeKeyDown:h,onPointerDownOutside:j,...l}=a,m=G(O,c),n=y(c),{onClose:o}=m;return f.useEffect(()=>(document.addEventListener(A,o),()=>document.removeEventListener(A,o)),[o]),f.useEffect(()=>{if(m.trigger){let a=a=>{let b=a.target;b?.contains(m.trigger)&&o()};return window.addEventListener("scroll",a,{capture:!0}),()=>window.removeEventListener("scroll",a,{capture:!0})}},[m.trigger,o]),(0,e.jsx)(i.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:h,onPointerDownOutside:j,onFocusOutside:a=>a.preventDefault(),onDismiss:o,children:(0,e.jsxs)(k.Content,{"data-state":m.stateAttribute,...n,...l,ref:b,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,e.jsx)(T,{children:d}),(0,e.jsx)(R,{scope:c,isInside:!0,children:(0,e.jsx)(v,{id:m.contentId,role:"tooltip",children:g||d})})]})})});P.displayName=O;var V="TooltipArrow",W=f.forwardRef((a,b)=>{let{__scopeTooltip:c,...d}=a,f=y(c);return S(V,c).isInside?null:(0,e.jsx)(k.Arrow,{...f,...d,ref:b})});W.displayName=V;var X=a.i(68114);function Y({delayDuration:a=0,...b}){return(0,e.jsx)(D,{"data-slot":"tooltip-provider",delayDuration:a,...b})}function Z({...a}){return(0,e.jsx)(Y,{children:(0,e.jsx)(H,{"data-slot":"tooltip",...a})})}function $({...a}){return(0,e.jsx)(J,{"data-slot":"tooltip-trigger",...a})}function _({className:a,sideOffset:b=0,children:c,...d}){return(0,e.jsx)(N,{children:(0,e.jsxs)(P,{"data-slot":"tooltip-content",sideOffset:b,className:(0,X.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",a),...d,children:[c,(0,e.jsx)(W,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}a.s(["Tooltip",()=>Z,"TooltipContent",()=>_,"TooltipProvider",()=>Y,"TooltipTrigger",()=>$],85259),a.i(95445),a.s([],10775)},66155,6678,a=>{"use strict";var b=a.i(72131),c=a.i(95445);function d(a,d,e){let[f,g]=(0,b.useState)([]),[h,i]=(0,b.useState)(!0),[j,k]=(0,b.useState)(null),l=(0,c.createClient)(),m=(0,b.useCallback)(async()=>{try{i(!0),k(null);let b=l.from("habit_logs").select("*").eq("habit_id",a).order("date",{ascending:!1});d&&(b=b.gte("date",d)),e&&(b=b.lte("date",e));let{data:c,error:f}=await b;if(f)throw f;g(c||[])}catch(a){k(a.message),console.error("Error fetching habit logs:",a)}finally{i(!1)}},[a,d,e]);return(0,b.useEffect)(()=>{a&&m()},[a,m]),{logs:f,isLoading:h,error:j,refetch:m}}function e(a,b){let c=new Date,d=new Date(b),e=Math.floor((c.getTime()-d.getTime())/864e5)+1,f=a.filter(a=>"completed"===a.status).length,g=a.filter(a=>"failed"===a.status).length,h=a.filter(a=>"skipped"===a.status).length,i=f+g,j=i>0?Math.round(f/i*100):0,k=[...a].sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()),l=0,m=new Date;for(let a of k){let b=new Date(a.date);if(Math.floor((m.getTime()-b.getTime())/864e5)>1)break;if("completed"===a.status)l++,m=b;else if("failed"===a.status)break}let n=0,o=0;for(let b of[...a].sort((a,b)=>new Date(a.date).getTime()-new Date(b.date).getTime()))"completed"===b.status?n=Math.max(n,++o):"failed"===b.status&&(o=0);return{totalDays:e,completedDays:f,failedDays:g,skippedDays:h,completionRate:j,currentStreak:l,bestStreak:n}}function f(){let[a,d]=(0,b.useState)([]),[f,g]=(0,b.useState)(!0),[h,i]=(0,b.useState)(null),j=(0,c.createClient)(),k=(0,b.useCallback)(async()=>{try{g(!0),i(null);let{data:{user:a}}=await j.auth.getUser();if(!a?.email)return void g(!1);let{data:b,error:c}=await j.from("partnerships").select("user_id, partner_email").eq("partner_email",a.email).eq("status","active");if(c)throw c;if(!b||0===b.length){d([]),g(!1);return}let f=b.map(a=>a.user_id),{data:h,error:k}=await j.from("habits").select("*, habit_logs(*)").in("user_id",f).order("created_at",{ascending:!1});if(k)throw k;let l=new Date().toISOString().split("T")[0],m={};for(let a of h||[]){m[a.user_id]||(m[a.user_id]=[]);let b=a.habit_logs||[],c=b.find(a=>a.date===l),d=e(b,a.start_date||a.created_at);m[a.user_id].push({id:a.id,user_id:a.user_id,title:a.title,description:a.description,created_at:a.created_at,start_date:a.start_date||a.created_at,habit_logs:b,stats:{completionRate:d.completionRate,currentStreak:d.currentStreak,completedDays:d.completedDays,failedDays:d.failedDays},todayStatus:c?.status||"pending",todayReason:c?.reason||null})}let n=f.map(a=>({id:a,email:"Partner",habits:m[a]||[]}));d(n)}catch(a){i(a.message),console.error("Error fetching shared habits:",a)}finally{g(!1)}},[]);return(0,b.useEffect)(()=>{k()},[k]),{partners:a,isLoading:f,error:h,refetch:k}}a.s(["calculateHabitStats",()=>e,"useHabitLogs",()=>d],6678),a.s(["useSharedHabits",()=>f],66155)},49809,50889,42604,22679,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(13749),e=a.i(50522),f=a.i(33441),g=a.i(33508),h=a.i(23025),i=a.i(65151),j=a.i(99570),k=a.i(42021),l=a.i(85259);a.i(10775);var m=a.i(6678);a.i(66155),a.s([],50889);var n=a.i(68114);let o=["Lu","Ma","Mi","Ju","Vi","Sa","Do"];function p({logs:a,startDate:p,onDayClick:q,showStats:r=!0}){let[s,t]=(0,c.useState)(new Date),u=s.getFullYear(),v=s.getMonth(),w=(0,c.useMemo)(()=>{let b={};return a.forEach(a=>{b[a.date]=a}),b},[a]),x=(0,c.useMemo)(()=>(0,m.calculateHabitStats)(a,p),[a,p]),y=(0,c.useMemo)(()=>{let a=new Date(u,v,1),b=new Date(u,v+1,0),c=a.getDay()-1;-1===c&&(c=6);let d=[];for(let a=0;a<c;a++)d.push(null);for(let a=1;a<=b.getDate();a++)d.push(new Date(u,v,a));return d},[u,v]);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold",children:[["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][v]," ",u]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{t(new Date)},children:"Hoy"}),(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>{t(new Date(u,v-1,1))},children:(0,b.jsx)(d.ChevronLeft,{className:"w-4 h-4"})}),(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>{t(new Date(u,v+1,1))},children:(0,b.jsx)(e.ChevronRight,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[o.map(a=>(0,b.jsx)("div",{className:"text-center text-xs font-medium text-muted-foreground py-2",children:a},a)),(0,b.jsx)(l.TooltipProvider,{children:y.map((a,c)=>{let d,e,j;if(!a)return(0,b.jsx)("div",{className:"aspect-square"},`empty-${c}`);let k=a.toISOString().split("T")[0],m=w[k],o=(d=new Date,a.getDate()===d.getDate()&&a.getMonth()===d.getMonth()&&a.getFullYear()===d.getFullYear()),r=((e=new Date).setHours(0,0,0,0),a>e),s=((j=new Date(p)).setHours(0,0,0,0),a<j),t=r||s;return(0,b.jsxs)(l.Tooltip,{children:[(0,b.jsx)(l.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)("button",{onClick:()=>!t&&q?.(k,m),disabled:t,className:(0,n.cn)("aspect-square flex flex-col items-center justify-center rounded-lg border text-sm transition-all","hover:bg-accent/50",o&&"ring-2 ring-primary",t&&"opacity-40 cursor-not-allowed",m&&(a=>{switch(a){case"completed":return"bg-green-500/20 border-green-500/50";case"failed":return"bg-red-500/20 border-red-500/50";case"skipped":return"bg-yellow-500/20 border-yellow-500/50";case"partial":return"bg-blue-500/20 border-blue-500/50";default:return""}})(m.status),!m&&!t&&"border-border/50 hover:border-border"),children:[(0,b.jsx)("span",{className:(0,n.cn)("text-xs",o&&"font-bold"),children:a.getDate()}),m&&(0,b.jsx)("span",{className:"mt-0.5",children:(a=>{switch(a){case"completed":return(0,b.jsx)(f.Check,{className:"w-4 h-4 text-green-500"});case"failed":return(0,b.jsx)(g.X,{className:"w-4 h-4 text-red-500"});case"skipped":return(0,b.jsx)(h.Minus,{className:"w-4 h-4 text-yellow-500"});case"partial":return(0,b.jsx)(i.Circle,{className:"w-4 h-4 text-blue-500"});default:return null}})(m.status)})]})}),m&&(0,b.jsx)(l.TooltipContent,{children:(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium capitalize",children:m.status}),m.reason&&(0,b.jsxs)("p",{className:"text-muted-foreground mt-1",children:["RazÃ³n: ",m.reason]})]})})]},k)})})]}),r&&(0,b.jsxs)(k.GlassCard,{className:"mt-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-500",children:x.completedDays}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Completados"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-red-500",children:x.failedDays}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fallados"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-primary",children:[x.completionRate,"%"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cumplimiento"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-orange-500",children:[x.currentStreak,x.currentStreak>0&&" ðŸ”¥"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Racha actual"})]})]}),x.bestStreak>x.currentStreak&&(0,b.jsxs)("p",{className:"text-center text-xs text-muted-foreground mt-2",children:["Mejor racha: ",x.bestStreak," dÃ­as"]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-4 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded bg-green-500/20 border border-green-500/50"}),(0,b.jsx)("span",{children:"Completado"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded bg-red-500/20 border border-red-500/50"}),(0,b.jsx)("span",{children:"Fallado"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded bg-yellow-500/20 border border-yellow-500/50"}),(0,b.jsx)("span",{children:"Saltado"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded ring-2 ring-primary"}),(0,b.jsx)("span",{children:"Hoy"})]})]})]})}a.s(["HabitCalendar",()=>p],49809);var q=a.i(14574);function r({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,n.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var s=a.i(70430);function t({open:a,onOpenChange:d,habitTitle:e,date:i,currentStatus:k,currentReason:l,onSubmit:m}){let[o,p]=(0,c.useState)(k||null),[t,u]=(0,c.useState)(l||""),[v,w]=(0,c.useState)(!1),x=async()=>{if(o){w(!0);try{await m(o,t||void 0),d(!1),p(null),u("")}finally{w(!1)}}},y=[{value:"completed",label:"Completado",icon:(0,b.jsx)(f.Check,{className:"w-5 h-5"}),color:"border-green-500 bg-green-500/20 text-green-500"},{value:"failed",label:"Fallado",icon:(0,b.jsx)(g.X,{className:"w-5 h-5"}),color:"border-red-500 bg-red-500/20 text-red-500"},{value:"skipped",label:"Saltado",icon:(0,b.jsx)(h.Minus,{className:"w-5 h-5"}),color:"border-yellow-500 bg-yellow-500/20 text-yellow-500"}];return(0,b.jsx)(q.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(q.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsx)(q.DialogTitle,{children:"Registrar hÃ¡bito"}),(0,b.jsxs)(q.DialogDescription,{children:[(0,b.jsx)("span",{className:"font-medium",children:e}),(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-xs capitalize",children:new Date(i).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{children:"Â¿CÃ³mo te fue?"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-2",children:y.map(a=>(0,b.jsxs)("button",{onClick:()=>p(a.value),className:(0,n.cn)("flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all",o===a.value?a.color:"border-border hover:border-muted-foreground/50"),children:[a.icon,(0,b.jsx)("span",{className:"text-xs font-medium",children:a.label})]},a.value))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"reason",children:"failed"===o?"Â¿QuÃ© pasÃ³? (opcional pero recomendado)":"Notas (opcional)"}),(0,b.jsx)(r,{id:"reason",placeholder:"failed"===o?"Ej: Me quedÃ© trabajando hasta tarde...":"AÃ±ade notas sobre este dÃ­a...",value:t,onChange:a=>u(a.target.value),rows:3,className:(0,n.cn)("failed"===o&&"border-red-500/50 focus:border-red-500")}),"failed"===o&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Registrar la razÃ³n te ayuda a identificar patrones y tu accountability partner podrÃ¡ apoyarte mejor."})]})]}),(0,b.jsxs)(q.DialogFooter,{children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),(0,b.jsx)(j.Button,{onClick:x,disabled:!o||v,children:v?"Guardando...":"Guardar"})]})]})})}a.s(["HabitLogModal",()=>t],42604);var u=a.i(95445),v=a.i(7554),w=a.i(70121),x=a.i(96743),y=a.i(86228),z=a.i(22297),A=a.i(92843),B=a.i(4691),C=a.i(92616),D=a.i(77192);function E(a){var d;let e,f=(d=a,(e=c.forwardRef((a,b)=>{let{children:d,...e}=a;if(c.isValidElement(d)){var f;let a,g,h=(f=d,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(e,d.props);return d.type!==c.Fragment&&(i.ref=b?(0,w.composeRefs)(b,h):h),c.cloneElement(d,i)}return c.Children.count(d)>1?c.Children.only(null):null})).displayName=`${d}.SlotClone`,e),g=c.forwardRef((a,d)=>{let{children:e,...g}=a,h=c.Children.toArray(e),i=h.find(G);if(i){let a=i.props.children,e=h.map(b=>b!==i?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(f,{...g,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(f,{...g,ref:d,children:e})});return g.displayName=`${a}.Slot`,g}a.i(35112);var F=Symbol("radix.slottable");function G(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===F}var H=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,d)=>{let e=E(`Primitive.${d}`),f=c.forwardRef((a,c)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?e:d,{...g,ref:c})});return f.displayName=`Primitive.${d}`,{...a,[d]:f}},{}),I=a.i(25152),J=a.i(41852),K=a.i(52081),L="Popover",[M,N]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(L,[B.createPopperScope]),O=(0,B.createPopperScope)(),[P,Q]=M(L),R=a=>{let{__scopePopover:d,children:e,open:f,defaultOpen:g,onOpenChange:h,modal:i=!1}=a,j=O(d),k=c.useRef(null),[l,m]=c.useState(!1),[n,o]=(0,I.useControllableState)({prop:f,defaultProp:g??!1,onChange:h,caller:L});return(0,b.jsx)(B.Root,{...j,children:(0,b.jsx)(P,{scope:d,contentId:(0,A.useId)(),triggerRef:k,open:n,onOpenChange:o,onOpenToggle:c.useCallback(()=>o(a=>!a),[o]),hasCustomAnchor:l,onCustomAnchorAdd:c.useCallback(()=>m(!0),[]),onCustomAnchorRemove:c.useCallback(()=>m(!1),[]),modal:i,children:e})})};R.displayName=L;var S="PopoverAnchor";c.forwardRef((a,d)=>{let{__scopePopover:e,...f}=a,g=Q(S,e),h=O(e),{onCustomAnchorAdd:i,onCustomAnchorRemove:j}=g;return c.useEffect(()=>(i(),()=>j()),[i,j]),(0,b.jsx)(B.Anchor,{...h,...f,ref:d})}).displayName=S;var T="PopoverTrigger",U=c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=Q(T,d),g=O(d),h=(0,w.useComposedRefs)(c,f.triggerRef),i=(0,b.jsx)(H.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":ae(f.open),...e,ref:h,onClick:(0,v.composeEventHandlers)(a.onClick,f.onOpenToggle)});return f.hasCustomAnchor?i:(0,b.jsx)(B.Anchor,{asChild:!0,...g,children:i})});U.displayName=T;var V="PopoverPortal",[W,X]=M(V,{forceMount:void 0}),Y=a=>{let{__scopePopover:c,forceMount:d,children:e,container:f}=a,g=Q(V,c);return(0,b.jsx)(W,{scope:c,forceMount:d,children:(0,b.jsx)(D.Presence,{present:d||g.open,children:(0,b.jsx)(C.Portal,{asChild:!0,container:f,children:e})})})};Y.displayName=V;var Z="PopoverContent",$=c.forwardRef((a,c)=>{let d=X(Z,a.__scopePopover),{forceMount:e=d.forceMount,...f}=a,g=Q(Z,a.__scopePopover);return(0,b.jsx)(D.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(aa,{...f,ref:c}):(0,b.jsx)(ab,{...f,ref:c})})});$.displayName=Z;var _=E("PopoverContent.RemoveScroll"),aa=c.forwardRef((a,d)=>{let e=Q(Z,a.__scopePopover),f=c.useRef(null),g=(0,w.useComposedRefs)(d,f),h=c.useRef(!1);return c.useEffect(()=>{let a=f.current;if(a)return(0,J.hideOthers)(a)},[]),(0,b.jsx)(K.RemoveScroll,{as:_,allowPinchZoom:!0,children:(0,b.jsx)(ac,{...a,ref:g,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,v.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),h.current||e.triggerRef.current?.focus()}),onPointerDownOutside:(0,v.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;h.current=2===b.button||c},{checkForDefaultPrevented:!1}),onFocusOutside:(0,v.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),ab=c.forwardRef((a,d)=>{let e=Q(Z,a.__scopePopover),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(ac,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),ac=c.forwardRef((a,c)=>{let{__scopePopover:d,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onInteractOutside:l,...m}=a,n=Q(Z,d),o=O(d);return(0,y.useFocusGuards)(),(0,b.jsx)(z.FocusScope,{asChild:!0,loop:!0,trapped:e,onMountAutoFocus:f,onUnmountAutoFocus:g,children:(0,b.jsx)(x.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onDismiss:()=>n.onOpenChange(!1),children:(0,b.jsx)(B.Content,{"data-state":ae(n.open),role:"dialog",id:n.contentId,...o,...m,ref:c,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ad="PopoverClose";function ae(a){return a?"open":"closed"}function af({...a}){return(0,b.jsx)(R,{"data-slot":"popover",...a})}function ag({...a}){return(0,b.jsx)(U,{"data-slot":"popover-trigger",...a})}function ah({className:a,align:c="center",sideOffset:d=4,...e}){return(0,b.jsx)(Y,{children:(0,b.jsx)($,{"data-slot":"popover-content",align:c,sideOffset:d,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",a),...e})})}c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=Q(ad,d);return(0,b.jsx)(H.button,{type:"button",...e,ref:c,onClick:(0,v.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})}).displayName=ad,c.forwardRef((a,c)=>{let{__scopePopover:d,...e}=a,f=O(d);return(0,b.jsx)(B.Arrow,{...f,...e,ref:c})}).displayName="PopoverArrow";var ai=a.i(23292),aj=a.i(70106);let ak=(0,aj.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var al=a.i(96221);let am=(0,aj.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),an=(0,aj.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ao=["ðŸ’ª","ðŸ”¥","â­","ðŸ‘","ðŸŽ¯","ðŸ’¯","ðŸš€","â¤ï¸"],ap=[{emoji:"ðŸ’ª",text:"Â¡TÃº puedes!"},{emoji:"ðŸ”¥",text:"Â¡Sigue asÃ­!"},{emoji:"â­",text:"Â¡Eres increÃ­ble!"},{emoji:"ðŸŽ¯",text:"Â¡Un dÃ­a a la vez!"}];function aq({habitId:a,habitTitle:d,onSent:e}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(""),[k,l]=(0,c.useState)(null),[m,o]=(0,c.useState)(!1),p=(0,u.createClient)(),q=async b=>{let c=b||h;if(!c.trim())return void ai.toast.error("Escribe un mensaje");o(!0);try{let{data:{user:b}}=await p.auth.getUser();if(!b?.email)throw Error("No autenticado");let{error:d}=await p.from("encouragements").insert({habit_id:a,from_email:b.email,message:c,emoji:k});if(d)throw d;ai.toast.success("Â¡Mensaje de apoyo enviado!"),i(""),l(null),g(!1),e?.()}catch(a){ai.toast.error(a.message||"Error al enviar")}finally{o(!1)}};return(0,b.jsxs)(af,{open:f,onOpenChange:g,children:[(0,b.jsx)(ag,{asChild:!0,children:(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,b.jsx)(ak,{className:"w-4 h-4"}),"Enviar Ã¡nimo"]})}),(0,b.jsx)(ah,{className:"w-80",align:"end",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-sm",children:"Enviar apoyo"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Para: ",d]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mensajes rÃ¡pidos:"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:ap.map(a=>(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",className:"justify-start text-xs h-auto py-2",onClick:()=>q(`${a.emoji} ${a.text}`),disabled:m,children:[(0,b.jsx)("span",{className:"mr-1",children:a.emoji}),a.text]},a.text))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"O escribe tu mensaje:"}),(0,b.jsx)("div",{className:"flex gap-1 flex-wrap",children:ao.map(a=>(0,b.jsx)("button",{onClick:()=>l(k===a?null:a),className:(0,n.cn)("w-8 h-8 rounded-lg text-lg hover:bg-accent transition-colors",k===a&&"bg-primary/20 ring-2 ring-primary"),children:a},a))}),(0,b.jsx)(r,{placeholder:"Escribe algo motivador...",value:h,onChange:a=>i(a.target.value),rows:2,className:"resize-none"}),(0,b.jsxs)(j.Button,{onClick:()=>q(),disabled:m||!h.trim(),className:"w-full",size:"sm",children:[m?(0,b.jsx)(al.Loader2,{className:"w-4 h-4 animate-spin mr-2"}):(0,b.jsx)(am,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})})]})}function ar({encouragements:a}){return 0===a.length?null:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(an,{className:"w-4 h-4 text-yellow-500"}),"Mensajes de apoyo (",a.length,")"]}),(0,b.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.map(a=>(0,b.jsx)("div",{className:"p-3 rounded-lg bg-gradient-to-r from-pink-500/10 to-purple-500/10 border border-pink-500/20",children:(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[a.emoji&&(0,b.jsx)("span",{className:"text-lg",children:a.emoji}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm",children:a.message}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["De: ",a.from_email.split("@")[0]," â€¢"," ",new Date(a.created_at).toLocaleDateString("es-ES",{day:"numeric",month:"short"})]})]})]})},a.id))})]})}a.s(["EncouragementList",()=>ar,"SendEncouragement",()=>aq],22679)},16106,a=>{"use strict";let b=(0,a.i(70106).default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]);a.s(["Flame",()=>b],16106)},82818,31577,a=>{"use strict";a.i(49809),a.i(42604),a.i(22679);var b=a.i(87924),c=a.i(68114),d=a.i(16106),e=a.i(70106);let f=(0,e.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),g=(0,e.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var h=a.i(1027);let i=(0,e.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),j=(0,e.default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var k=a.i(85259);let l=[{minStreak:100,icon:(0,b.jsx)(i,{className:"w-full h-full"}),label:"Leyenda",color:"text-yellow-400",bgColor:"bg-gradient-to-br from-yellow-500/30 to-orange-500/30 border-yellow-500/50"},{minStreak:50,icon:(0,b.jsx)(g,{className:"w-full h-full"}),label:"CampeÃ³n",color:"text-purple-400",bgColor:"bg-gradient-to-br from-purple-500/30 to-pink-500/30 border-purple-500/50"},{minStreak:30,icon:(0,b.jsx)(j,{className:"w-full h-full"}),label:"Imparable",color:"text-blue-400",bgColor:"bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border-blue-500/50"},{minStreak:14,icon:(0,b.jsx)(f,{className:"w-full h-full"}),label:"Estrella",color:"text-green-400",bgColor:"bg-gradient-to-br from-green-500/30 to-emerald-500/30 border-green-500/50"},{minStreak:7,icon:(0,b.jsx)(h.Zap,{className:"w-full h-full"}),label:"En racha",color:"text-orange-400",bgColor:"bg-gradient-to-br from-orange-500/30 to-red-500/30 border-orange-500/50"},{minStreak:3,icon:(0,b.jsx)(d.Flame,{className:"w-full h-full"}),label:"Encendido",color:"text-red-400",bgColor:"bg-gradient-to-br from-red-500/30 to-orange-500/30 border-red-500/50"}];function m({currentStreak:a,bestStreak:d}){let e=Math.max(a,d),f=l.filter(a=>e>=a.minStreak),g=l.find(a=>e<a.minStreak);return 0!==f.length||g?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-sm",children:"Logros de racha"}),f.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-3",children:f.map(a=>(0,b.jsx)(k.TooltipProvider,{children:(0,b.jsxs)(k.Tooltip,{children:[(0,b.jsx)(k.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("div",{className:(0,c.cn)("w-12 h-12 rounded-full border-2 flex items-center justify-center p-2",a.bgColor,a.color),children:a.icon})}),(0,b.jsxs)(k.TooltipContent,{children:[(0,b.jsx)("p",{className:"font-medium",children:a.label}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Desbloqueado con ",a.minStreak,"+ dÃ­as"]})]})]})},a.label))}),g&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:["PrÃ³ximo logro: ",g.label]}),(0,b.jsxs)("span",{className:"font-medium",children:[e,"/",g.minStreak," dÃ­as"]})]}),(0,b.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:(0,c.cn)("h-full rounded-full transition-all",g.bgColor),style:{width:`${Math.min(e/g.minStreak*100,100)}%`}})})]})]}):null}a.s(["StreakAchievements",()=>m],31577),a.s([],82818)}];

//# sourceMappingURL=_434f5a8e._.js.map