module.exports=[66718,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},81560,86192,a=>{"use strict";let b,c=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>c],81560);var d=a.i(87924),e=a.i(72131),f=a.i(70121),g=a.i(97942),h=a.i(7554),i=Symbol("radix.slottable"),j="AlertDialog",[k,l]=function(a,b=[]){let c=[],f=()=>{let b=c.map(a=>e.createContext(a));return function(c){let d=c?.[a]||b;return e.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return f.scopeName=a,[function(b,f){let g=e.createContext(f),h=c.length;c=[...c,f];let i=b=>{let{scope:c,children:f,...i}=b,j=c?.[a]?.[h]||g,k=e.useMemo(()=>i,Object.values(i));return(0,d.jsx)(j.Provider,{value:k,children:f})};return i.displayName=b+"Provider",[i,function(c,d){let i=d?.[a]?.[h]||g,j=e.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return e.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(f,...b)]}(j,[g.createDialogScope]),m=(0,g.createDialogScope)(),n=a=>{let{__scopeAlertDialog:b,...c}=a,e=m(b);return(0,d.jsx)(g.Root,{...e,...c,modal:!0})};n.displayName=j;var o=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=m(c);return(0,d.jsx)(g.Trigger,{...f,...e,ref:b})});o.displayName="AlertDialogTrigger";var p=a=>{let{__scopeAlertDialog:b,...c}=a,e=m(b);return(0,d.jsx)(g.Portal,{...e,...c})};p.displayName="AlertDialogPortal";var q=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=m(c);return(0,d.jsx)(g.Overlay,{...f,...e,ref:b})});q.displayName="AlertDialogOverlay";var r="AlertDialogContent",[s,t]=k(r),u=((b=({children:a})=>(0,d.jsx)(d.Fragment,{children:a})).displayName="AlertDialogContent.Slottable",b.__radixId=i,b),v=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,children:i,...j}=a,k=m(c),l=e.useRef(null),n=(0,f.useComposedRefs)(b,l),o=e.useRef(null);return(0,d.jsx)(g.WarningProvider,{contentName:r,titleName:w,docsSlug:"alert-dialog",children:(0,d.jsx)(s,{scope:c,cancelRef:o,children:(0,d.jsxs)(g.Content,{role:"alertdialog",...k,...j,ref:n,onOpenAutoFocus:(0,h.composeEventHandlers)(j.onOpenAutoFocus,a=>{a.preventDefault(),o.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,d.jsx)(u,{children:i}),(0,d.jsx)(D,{contentRef:l})]})})})});v.displayName=r;var w="AlertDialogTitle",x=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=m(c);return(0,d.jsx)(g.Title,{...f,...e,ref:b})});x.displayName=w;var y="AlertDialogDescription",z=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=m(c);return(0,d.jsx)(g.Description,{...f,...e,ref:b})});z.displayName=y;var A=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=m(c);return(0,d.jsx)(g.Close,{...f,...e,ref:b})});A.displayName="AlertDialogAction";var B="AlertDialogCancel",C=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,{cancelRef:h}=t(B,c),i=m(c),j=(0,f.useComposedRefs)(b,h);return(0,d.jsx)(g.Close,{...i,...e,ref:j})});C.displayName=B;var D=({contentRef:a})=>{let b=`\`${r}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${r}\` by passing a \`${y}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${r}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return e.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},E=a.i(68114),F=a.i(99570);let G=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(q,{className:(0,E.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));G.displayName=q.displayName;let H=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(p,{children:[(0,d.jsx)(G,{}),(0,d.jsx)(v,{ref:c,className:(0,E.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));H.displayName=v.displayName;let I=({className:a,...b})=>(0,d.jsx)("div",{className:(0,E.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});I.displayName="AlertDialogHeader";let J=({className:a,...b})=>(0,d.jsx)("div",{className:(0,E.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});J.displayName="AlertDialogFooter";let K=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(x,{ref:c,className:(0,E.cn)("text-lg font-semibold",a),...b}));K.displayName=x.displayName;let L=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(z,{ref:c,className:(0,E.cn)("text-sm text-muted-foreground",a),...b}));L.displayName=z.displayName;let M=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(A,{ref:c,className:(0,E.cn)((0,F.buttonVariants)(),a),...b}));M.displayName=A.displayName;let N=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(C,{ref:c,className:(0,E.cn)((0,F.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));N.displayName=C.displayName,a.s(["AlertDialog",()=>n,"AlertDialogAction",()=>M,"AlertDialogCancel",()=>N,"AlertDialogContent",()=>H,"AlertDialogDescription",()=>L,"AlertDialogFooter",()=>J,"AlertDialogHeader",()=>I,"AlertDialogTitle",()=>K,"AlertDialogTrigger",()=>o],86192)},33508,14574,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508);var c=a.i(87924),d=a.i(97942),e=a.i(68114);function f({...a}){return(0,c.jsx)(d.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,c.jsx)(d.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,c.jsx)(d.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...b}){return(0,c.jsx)(d.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,c.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,c.jsx)(i,{}),(0,c.jsxs)(d.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,c.jsxs)(d.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,c.jsx)(b,{}),(0,c.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function l({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function m({className:a,...b}){return(0,c.jsx)(d.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...b})}function n({className:a,...b}){return(0,c.jsx)(d.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...b})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m,"DialogTrigger",()=>g],14574)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},62370,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(32886),f=a.i(15925),g=a.i(95445),h=a.i(42021),i=a.i(99570),j=a.i(33441),k=a.i(33508),l=a.i(70106);let m=(0,l.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var n=a.i(96221),o=a.i(41675),p=a.i(81560),q=a.i(14574),r=a.i(66718),s=a.i(70430),t=a.i(23292);let u=(0,l.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function v({onHabitAdded:a}){let[d,e]=(0,c.useState)(!1),[h,j]=(0,c.useState)(!1),k=(0,g.createClient)(),l=(0,f.useTranslations)("HabitTracker");async function m(b){b.preventDefault(),j(!0);let c=new FormData(b.currentTarget),d=c.get("title"),f=c.get("description");try{let{data:{user:b}}=await k.auth.getUser();if(!b)throw Error("Not authenticated");let{error:c}=await k.from("habits").insert({user_id:b.id,title:d,description:f,frequency:{type:"daily"}});if(c)throw c;t.toast.success(l("success")),e(!1),a()}catch(a){t.toast.error(a.message)}finally{j(!1)}}return(0,b.jsxs)(q.Dialog,{open:d,onOpenChange:e,children:[(0,b.jsx)(q.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(i.Button,{className:"gap-2",children:[(0,b.jsx)(u,{className:"w-4 h-4"})," ",l("addHabitButton")]})}),(0,b.jsxs)(q.DialogContent,{className:"sm:max-w-[425px] glass border-white/10",children:[(0,b.jsxs)(q.DialogHeader,{children:[(0,b.jsx)(q.DialogTitle,{children:l("createTitle")}),(0,b.jsx)(q.DialogDescription,{children:l("createDesc")})]}),(0,b.jsxs)("form",{onSubmit:m,children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(s.Label,{htmlFor:"title",children:l("habitTitleLabel")}),(0,b.jsx)(r.Input,{id:"title",name:"title",placeholder:l("habitTitlePlaceholder"),className:"col-span-3 bg-white/5 border-white/10",required:!0})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(s.Label,{htmlFor:"description",children:l("habitDescLabel")}),(0,b.jsx)(r.Input,{id:"description",name:"description",placeholder:l("habitDescPlaceholder"),className:"col-span-3 bg-white/5 border-white/10"})]})]}),(0,b.jsx)(q.DialogFooter,{children:(0,b.jsx)(i.Button,{type:"submit",disabled:h,children:h?l("creating"):l("createButton")})})]})]})]})}var w=a.i(35732),x=a.i(86192);function y(){let[a,l]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,u]=(0,c.useState)(!0),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),C=(0,g.createClient)(),D=(0,d.useRouter)(),E=(0,e.useLocale)(),F=new Date().toISOString().split("T")[0],G=(0,f.useTranslations)("HabitTracker"),H=(0,f.useTranslations)("Dashboard"),I=(0,f.useTranslations)("Common");async function J(){try{let{data:a,error:b}=await C.from("habits").select("*").order("created_at",{ascending:!1});if(b)throw b;let{data:c,error:d}=await C.from("habit_logs").select("*").eq("date",F);if(d)throw d;l(a||[]),r(c||[])}catch(a){console.error("Error fetching habits:",a),console.error("Error details:",{message:a.message,details:a.details,hint:a.hint,code:a.code}),console.error("Full error object:",JSON.stringify(a,null,2)),t.toast.error("Failed to load habits: "+a.message)}finally{u(!1)}}async function K(a,b){try{let{error:c}=await C.from("habit_logs").upsert({habit_id:a,date:F,status:b});if(c)throw c;r(c=>[...c.filter(b=>b.habit_id!==a),{habit_id:a,date:F,status:b}]),t.toast.success("completed"===b?G("greatJob"):G("logged"))}catch(a){t.toast.error(a.message)}}async function L(a){B(!0);try{let{error:b}=await C.from("habits").delete().eq("id",a);if(b)throw b;l(b=>b.filter(b=>b.id!==a)),t.toast.success(G("habitDeleted")||"Hábito eliminado")}catch(a){t.toast.error(a.message)}finally{B(!1),z(null)}}return((0,c.useEffect)(()=>{J()},[]),s)?(0,b.jsx)("div",{className:"flex justify-center p-8",children:(0,b.jsx)(n.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:G("todaysHabits")}),(0,b.jsx)(v,{onHabitAdded:J})]}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:0===a.length?(0,b.jsxs)(h.GlassCard,{className:"col-span-full text-center py-12",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:H("noHabits")}),(0,b.jsx)(v,{onHabitAdded:J})]}):a.map(a=>{let c=q.find(b=>b.habit_id===a.id),d=c?.status==="completed",e=c?.status==="failed";return(0,b.jsxs)(h.GlassCard,{className:"flex flex-col justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description})]}),(0,b.jsxs)(w.DropdownMenu,{children:[(0,b.jsx)(w.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(m,{className:"w-4 h-4"})})}),(0,b.jsxs)(w.DropdownMenuContent,{children:[(0,b.jsxs)(w.DropdownMenuItem,{onClick:()=>{var b;return b=a.id,void D.push(`/${E}/dashboard/habits/${b}`)},children:[(0,b.jsx)(o.Calendar,{className:"w-4 h-4 mr-2"}),G("viewCalendar")||"Ver calendario"]}),(0,b.jsx)(w.DropdownMenuSeparator,{}),(0,b.jsxs)(w.DropdownMenuItem,{className:"text-destructive",onClick:()=>z(a.id),children:[(0,b.jsx)(p.Trash2,{className:"w-4 h-4 mr-2"}),I("delete")]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsxs)(i.Button,{className:`flex-1 ${d?"bg-green-500/20 text-green-500 hover:bg-green-500/30":""}`,variant:d?"outline":"default",onClick:()=>K(a.id,"completed"),disabled:d,children:[(0,b.jsx)(j.Check,{className:"w-4 h-4 mr-2"}),G("done")]}),(0,b.jsxs)(i.Button,{className:`flex-1 ${e?"bg-red-500/20 text-red-500 hover:bg-red-500/30":""}`,variant:e?"outline":"secondary",onClick:()=>K(a.id,"failed"),disabled:e,children:[(0,b.jsx)(k.X,{className:"w-4 h-4 mr-2"}),G("fail")]})]})]},a.id)})}),(0,b.jsx)(x.AlertDialog,{open:!!y,onOpenChange:a=>!a&&z(null),children:(0,b.jsxs)(x.AlertDialogContent,{children:[(0,b.jsxs)(x.AlertDialogHeader,{children:[(0,b.jsx)(x.AlertDialogTitle,{children:G("deleteConfirmTitle")||"¿Eliminar hábito?"}),(0,b.jsx)(x.AlertDialogDescription,{children:G("deleteConfirmDescription")||"Esta acción no se puede deshacer. Se eliminarán todos los registros asociados a este hábito."})]}),(0,b.jsxs)(x.AlertDialogFooter,{children:[(0,b.jsx)(x.AlertDialogCancel,{disabled:A,children:I("cancel")||"Cancelar"}),(0,b.jsxs)(x.AlertDialogAction,{onClick:()=>y&&L(y),disabled:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[A?(0,b.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin mr-2"}):null,I("delete")||"Eliminar"]})]})]})})]})}var z=a.i(71078);function A(){let a=(0,f.useTranslations)("Dashboard");return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(z.Navbar,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:a("title")}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a("noHabits")})]}),(0,b.jsx)(y,{})]})}a.s(["default",()=>A],62370)}];

//# sourceMappingURL=_79b232ba._.js.map