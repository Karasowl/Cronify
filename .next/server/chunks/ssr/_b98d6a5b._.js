module.exports=[1027,a=>{"use strict";let b=(0,a.i(70106).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["Zap",()=>b],1027)},33508,14574,a=>{"use strict";let b=(0,a.i(70106).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508);var c=a.i(87924),d=a.i(97942),e=a.i(68114);function f({...a}){return(0,c.jsx)(d.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,c.jsx)(d.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,c.jsx)(d.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...b}){return(0,c.jsx)(d.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,c.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,c.jsx)(i,{}),(0,c.jsxs)(d.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,c.jsxs)(d.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,c.jsx)(b,{}),(0,c.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function l({className:a,...b}){return(0,c.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function m({className:a,...b}){return(0,c.jsx)(d.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...b})}function n({className:a,...b}){return(0,c.jsx)(d.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...b})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m,"DialogTrigger",()=>g],14574)},27050,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);let e=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var f=a.i(81560),g=a.i(96221),h=a.i(95445),i=a.i(99570),j=a.i(42021);a.i(82818);var k=a.i(49809),l=a.i(42604),m=a.i(22679),n=a.i(31577);a.i(50889);var o=a.i(6678),p=a.i(23292),q=a.i(86192);function r({params:a}){let{id:r,locale:s}=(0,c.use)(a),t=(0,d.useRouter)(),u=(0,h.createClient)(),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)();(0,c.useEffect)(()=>{!async function(){try{let{data:a,error:b}=await u.from("habits").select("*").eq("id",r).single();if(b)throw b;w(a);let{data:c}=await u.from("encouragements").select("*").eq("habit_id",r).order("created_at",{ascending:!1}).limit(10);C(c||[])}catch(a){p.toast.error("Error cargando h치bito: "+a.message),t.push(`/${s}/dashboard`)}finally{y(!1)}}()},[r,s,t]);let{logs:J,isLoading:K,refetch:L}=(0,o.useHabitLogs)(r),M=async(a,b)=>{try{let{error:c}=await u.from("habit_logs").upsert({habit_id:r,date:F,status:a,reason:b||null});if(c)throw c;p.toast.success("completed"===a?"춰Excelente! H치bito completado":"failed"===a?"Registrado. 춰Ma침ana lo logras!":"D칤a saltado registrado"),L()}catch(a){throw p.toast.error("Error registrando: "+a.message),a}},N=async()=>{A(!0);try{let{error:a}=await u.from("habits").delete().eq("id",r);if(a)throw a;p.toast.success("H치bito eliminado"),t.push(`/${s}/dashboard`)}catch(a){p.toast.error("Error eliminando: "+a.message),A(!1)}};if(x)return(0,b.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,b.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin text-primary"})});if(!v)return(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"H치bito no encontrado"}),(0,b.jsx)(i.Button,{variant:"outline",className:"mt-4",onClick:()=>t.push(`/${s}/dashboard`),children:"Volver al dashboard"})]});let O=(0,o.calculateHabitStats)(J,v.start_date||v.created_at);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>t.push(`/${s}/dashboard`),children:(0,b.jsx)(e,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:v.title}),v.description&&(0,b.jsx)("p",{className:"text-muted-foreground",children:v.description})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(q.AlertDialog,{children:[(0,b.jsx)(q.AlertDialogTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"destructive",size:"icon",disabled:z,children:z?(0,b.jsx)(g.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(f.Trash2,{className:"w-4 h-4"})})}),(0,b.jsxs)(q.AlertDialogContent,{children:[(0,b.jsxs)(q.AlertDialogHeader,{children:[(0,b.jsx)(q.AlertDialogTitle,{children:"쮼liminar h치bito?"}),(0,b.jsx)(q.AlertDialogDescription,{children:"Esta acci칩n no se puede deshacer. Se eliminar치n todos los registros asociados a este h치bito."})]}),(0,b.jsxs)(q.AlertDialogFooter,{children:[(0,b.jsx)(q.AlertDialogCancel,{children:"Cancelar"}),(0,b.jsx)(q.AlertDialogAction,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar"})]})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(j.GlassCard,{className:"text-center",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-green-500",children:O.completedDays}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"D칤as completados"})]}),(0,b.jsxs)(j.GlassCard,{className:"text-center",children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-red-500",children:O.failedDays}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"D칤as fallados"})]}),(0,b.jsxs)(j.GlassCard,{className:"text-center",children:[(0,b.jsxs)("p",{className:"text-3xl font-bold text-primary",children:[O.completionRate,"%"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Cumplimiento"})]}),(0,b.jsxs)(j.GlassCard,{className:"text-center",children:[(0,b.jsxs)("p",{className:"text-3xl font-bold text-orange-500",children:[O.currentStreak,O.currentStreak>=3&&" 游댠"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Racha actual"}),O.bestStreak>O.currentStreak&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Mejor: ",O.bestStreak," d칤as"]})]})]}),(O.currentStreak>=3||O.bestStreak>=3)&&(0,b.jsx)(j.GlassCard,{children:(0,b.jsx)(n.StreakAchievements,{currentStreak:O.currentStreak,bestStreak:O.bestStreak})}),(0,b.jsx)(j.GlassCard,{children:K?(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsx)(g.Loader2,{className:"w-6 h-6 animate-spin text-primary"})}):(0,b.jsx)(k.HabitCalendar,{logs:J,startDate:v.start_date||v.created_at,onDayClick:(a,b)=>{G(a),I(b),E(!0)},showStats:!1})}),B.length>0&&(0,b.jsx)(j.GlassCard,{className:"border-l-4 border-l-pink-500",children:(0,b.jsx)(m.EncouragementList,{encouragements:B})}),J.filter(a=>"failed"===a.status&&a.reason).length>0&&(0,b.jsxs)(j.GlassCard,{children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"칔ltimos fallos registrados"}),(0,b.jsx)("div",{className:"space-y-3",children:J.filter(a=>"failed"===a.status&&a.reason).slice(0,5).map(a=>(0,b.jsx)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:new Date(a.date).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"short"})}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.reason})]})},a.id))})]}),(0,b.jsx)(l.HabitLogModal,{open:D,onOpenChange:E,habitTitle:v.title,date:F,currentStatus:H?.status,currentReason:H?.reason||void 0,onSubmit:M})]})}a.s(["default",()=>r],27050)}];

//# sourceMappingURL=_b98d6a5b._.js.map