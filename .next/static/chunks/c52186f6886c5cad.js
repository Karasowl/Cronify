(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73375,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},63059,e=>{"use strict";var t=e.i(46349);e.s(["ChevronRight",()=>t.default])},99023,14683,46798,92381,e=>{"use strict";let t,r=(0,e.i(75254).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>r],99023);var a=e.i(60434);e.s(["Circle",()=>a.default],14683);var n=e.i(43476),o=e.i(71645),l=e.i(81140),s=e.i(20783),i=e.i(26330),d=e.i(10772),c=e.i(53660),u=e.i(74606),p=e.i(96626);e.i(74080);var m=Symbol("radix.slottable");function f(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}var h=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,a;let l,i,d,c=(a=r=`Primitive.${t}`,(l=o.forwardRef((e,t)=>{let{children:r,...a}=e;if(o.isValidElement(r)){var n;let e,l,i=(n=r,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),d=function(e,t){let r={...t};for(let a in t){let n=e[a],o=t[a];/^on[A-Z]/.test(a)?n&&o?r[a]=(...e)=>{let t=o(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...o}:"className"===a&&(r[a]=[n,o].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==o.Fragment&&(d.ref=t?(0,s.composeRefs)(t,i):i),o.cloneElement(r,d)}return o.Children.count(r)>1?o.Children.only(null):null})).displayName=`${a}.SlotClone`,i=l,(d=o.forwardRef((e,t)=>{let{children:r,...a}=e,l=o.Children.toArray(r),s=l.find(f);if(s){let e=s.props.children,r=l.map(t=>t!==s?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,n.jsx)(i,{...a,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null})}return(0,n.jsx)(i,{...a,ref:t,children:r})})).displayName=`${r}.Slot`,d),u=o.forwardRef((e,r)=>{let{asChild:a,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(a?c:t,{...o,ref:r})});return u.displayName=`Primitive.${t}`,{...e,[t]:u}},{}),x=e.i(69340),g=Symbol("radix.slottable");function v(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===g}var b=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{var r,a;let l,i,d,c=(a=r=`Primitive.${t}`,(l=o.forwardRef((e,t)=>{let{children:r,...a}=e;if(o.isValidElement(r)){var n;let e,l,i=(n=r,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),d=function(e,t){let r={...t};for(let a in t){let n=e[a],o=t[a];/^on[A-Z]/.test(a)?n&&o?r[a]=(...e)=>{let t=o(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...o}:"className"===a&&(r[a]=[n,o].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==o.Fragment&&(d.ref=t?(0,s.composeRefs)(t,i):i),o.cloneElement(r,d)}return o.Children.count(r)>1?o.Children.only(null):null})).displayName=`${a}.SlotClone`,i=l,(d=o.forwardRef((e,t)=>{let{children:r,...a}=e,l=o.Children.toArray(r),s=l.find(v);if(s){let e=s.props.children,r=l.map(t=>t!==s?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,n.jsx)(i,{...a,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null})}return(0,n.jsx)(i,{...a,ref:t,children:r})})).displayName=`${r}.Slot`,d),u=o.forwardRef((e,r)=>{let{asChild:a,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(a?c:t,{...o,ref:r})});return u.displayName=`Primitive.${t}`,{...e,[t]:u}},{}),y=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),j=o.forwardRef((e,t)=>(0,n.jsx)(b.span,{...e,ref:t,style:{...y,...e.style}}));j.displayName="VisuallyHidden";var[w,N]=function(e,t=[]){let r=[],a=()=>{let t=r.map(e=>o.createContext(e));return function(r){let a=r?.[e]||t;return o.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return a.scopeName=e,[function(t,a){let l=o.createContext(a),s=r.length;r=[...r,a];let i=t=>{let{scope:r,children:a,...i}=t,d=r?.[e]?.[s]||l,c=o.useMemo(()=>i,Object.values(i));return(0,n.jsx)(d.Provider,{value:c,children:a})};return i.displayName=t+"Provider",[i,function(r,n){let i=n?.[e]?.[s]||l,d=o.useContext(i);if(d)return d;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(a,...t)]}("Tooltip",[c.createPopperScope]),C=(0,c.createPopperScope)(),k="TooltipProvider",E="tooltip.open",[R,S]=w(k),_=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:a=300,disableHoverableContent:l=!1,children:s}=e,i=o.useRef(!0),d=o.useRef(!1),c=o.useRef(0);return o.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,n.jsx)(R,{scope:t,isOpenDelayedRef:i,delayDuration:r,onOpen:o.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:o.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,a)},[a]),isPointerInTransitRef:d,onPointerInTransitChange:o.useCallback(e=>{d.current=e},[]),disableHoverableContent:l,children:s})};_.displayName=k;var D="Tooltip",[P,T]=w(D),M=e=>{let{__scopeTooltip:t,children:r,open:a,defaultOpen:l,onOpenChange:s,disableHoverableContent:i,delayDuration:u}=e,p=S(D,e.__scopeTooltip),m=C(t),[f,h]=o.useState(null),g=(0,d.useId)(),v=o.useRef(0),b=i??p.disableHoverableContent,y=u??p.delayDuration,j=o.useRef(!1),[w,N]=(0,x.useControllableState)({prop:a,defaultProp:l??!1,onChange:e=>{e?(p.onOpen(),document.dispatchEvent(new CustomEvent(E))):p.onClose(),s?.(e)},caller:D}),k=o.useMemo(()=>w?j.current?"delayed-open":"instant-open":"closed",[w]),R=o.useCallback(()=>{window.clearTimeout(v.current),v.current=0,j.current=!1,N(!0)},[N]),_=o.useCallback(()=>{window.clearTimeout(v.current),v.current=0,N(!1)},[N]),T=o.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{j.current=!0,N(!0),v.current=0},y)},[y,N]);return o.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),(0,n.jsx)(c.Root,{...m,children:(0,n.jsx)(P,{scope:t,contentId:g,open:w,stateAttribute:k,trigger:f,onTriggerChange:h,onTriggerEnter:o.useCallback(()=>{p.isOpenDelayedRef.current?T():R()},[p.isOpenDelayedRef,T,R]),onTriggerLeave:o.useCallback(()=>{b?_():(window.clearTimeout(v.current),v.current=0)},[_,b]),onOpen:R,onClose:_,disableHoverableContent:b,children:r})})};M.displayName=D;var O="TooltipTrigger",L=o.forwardRef((e,t)=>{let{__scopeTooltip:r,...a}=e,i=T(O,r),d=S(O,r),u=C(r),p=o.useRef(null),m=(0,s.useComposedRefs)(t,p,i.onTriggerChange),f=o.useRef(!1),x=o.useRef(!1),g=o.useCallback(()=>f.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,n.jsx)(c.Anchor,{asChild:!0,...u,children:(0,n.jsx)(h.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...a,ref:m,onPointerMove:(0,l.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(x.current||d.isPointerInTransitRef.current||(i.onTriggerEnter(),x.current=!0))}),onPointerLeave:(0,l.composeEventHandlers)(e.onPointerLeave,()=>{i.onTriggerLeave(),x.current=!1}),onPointerDown:(0,l.composeEventHandlers)(e.onPointerDown,()=>{i.open&&i.onClose(),f.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,l.composeEventHandlers)(e.onFocus,()=>{f.current||i.onOpen()}),onBlur:(0,l.composeEventHandlers)(e.onBlur,i.onClose),onClick:(0,l.composeEventHandlers)(e.onClick,i.onClose)})})});L.displayName=O;var A="TooltipPortal",[z,F]=w(A,{forceMount:void 0}),H=e=>{let{__scopeTooltip:t,forceMount:r,children:a,container:o}=e,l=T(A,t);return(0,n.jsx)(z,{scope:t,forceMount:r,children:(0,n.jsx)(p.Presence,{present:r||l.open,children:(0,n.jsx)(u.Portal,{asChild:!0,container:o,children:a})})})};H.displayName=A;var $="TooltipContent",I=o.forwardRef((e,t)=>{let r=F($,e.__scopeTooltip),{forceMount:a=r.forceMount,side:o="top",...l}=e,s=T($,e.__scopeTooltip);return(0,n.jsx)(p.Presence,{present:a||s.open,children:s.disableHoverableContent?(0,n.jsx)(U,{side:o,...l,ref:t}):(0,n.jsx)(B,{side:o,...l,ref:t})})}),B=o.forwardRef((e,t)=>{let r=T($,e.__scopeTooltip),a=S($,e.__scopeTooltip),l=o.useRef(null),i=(0,s.useComposedRefs)(t,l),[d,c]=o.useState(null),{trigger:u,onClose:p}=r,m=l.current,{onPointerInTransitChange:f}=a,h=o.useCallback(()=>{c(null),f(!1)},[f]),x=o.useCallback((e,t)=>{let r,a=e.currentTarget,n={x:e.clientX,y:e.clientY},o=function(e,t){let r=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,a,n,o)){case o:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw Error("unreachable")}}(n,a.getBoundingClientRect());c(((r=[...function(e,t,r=5){let a=[];switch(t){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return a}(n,o),...function(e){let{top:t,right:r,bottom:a,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:a},{x:n,y:a}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let a=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(a.y-r.y)>=(e.y-r.y)*(a.x-r.x))t.pop();else break}t.push(a)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let a=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(a.y-t.y)>=(e.y-t.y)*(a.x-t.x))r.pop();else break}r.push(a)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),f(!0)},[f]);return o.useEffect(()=>()=>h(),[h]),o.useEffect(()=>{if(u&&m){let e=e=>x(e,m),t=e=>x(e,u);return u.addEventListener("pointerleave",e),m.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),m.removeEventListener("pointerleave",t)}}},[u,m,x,h]),o.useEffect(()=>{if(d){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},a=u?.contains(t)||m?.contains(t),n=!function(e,t){let{x:r,y:a}=e,n=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let l=t[e],s=t[o],i=l.x,d=l.y,c=s.x,u=s.y;d>a!=u>a&&r<(c-i)*(a-d)/(u-d)+i&&(n=!n)}return n}(r,d);a?h():n&&(h(),p())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,m,d,p,h]),(0,n.jsx)(U,{...e,ref:i})}),[V,W]=w(D,{isInside:!1}),q=((t=({children:e})=>(0,n.jsx)(n.Fragment,{children:e})).displayName="TooltipContent.Slottable",t.__radixId=m,t),U=o.forwardRef((e,t)=>{let{__scopeTooltip:r,children:a,"aria-label":l,onEscapeKeyDown:s,onPointerDownOutside:d,...u}=e,p=T($,r),m=C(r),{onClose:f}=p;return o.useEffect(()=>(document.addEventListener(E,f),()=>document.removeEventListener(E,f)),[f]),o.useEffect(()=>{if(p.trigger){let e=e=>{let t=e.target;t?.contains(p.trigger)&&f()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[p.trigger,f]),(0,n.jsx)(i.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:d,onFocusOutside:e=>e.preventDefault(),onDismiss:f,children:(0,n.jsxs)(c.Content,{"data-state":p.stateAttribute,...m,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,n.jsx)(q,{children:a}),(0,n.jsx)(V,{scope:r,isInside:!0,children:(0,n.jsx)(j,{id:p.contentId,role:"tooltip",children:l||a})})]})})});I.displayName=$;var Y="TooltipArrow",Z=o.forwardRef((e,t)=>{let{__scopeTooltip:r,...a}=e,o=C(r);return W(Y,r).isInside?null:(0,n.jsx)(c.Arrow,{...o,...a,ref:t})});Z.displayName=Y;var G=e.i(75157);function X({delayDuration:e=0,...t}){return(0,n.jsx)(_,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function J({...e}){return(0,n.jsx)(X,{children:(0,n.jsx)(M,{"data-slot":"tooltip",...e})})}function K({...e}){return(0,n.jsx)(L,{"data-slot":"tooltip-trigger",...e})}function Q({className:e,sideOffset:t=0,children:r,...a}){return(0,n.jsx)(H,{children:(0,n.jsxs)(I,{"data-slot":"tooltip-content",sideOffset:t,className:(0,G.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...a,children:[r,(0,n.jsx)(Z,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}e.s(["Tooltip",()=>J,"TooltipContent",()=>Q,"TooltipProvider",()=>X,"TooltipTrigger",()=>K],46798),e.i(11795),e.s([],92381)},3991,76371,e=>{"use strict";var t=e.i(71645),r=e.i(11795);function a(e,a,n){let[o,l]=(0,t.useState)([]),[s,i]=(0,t.useState)(!0),[d,c]=(0,t.useState)(null),u=(0,r.createClient)(),p=(0,t.useCallback)(async()=>{try{i(!0),c(null);let t=u.from("habit_logs").select("*").eq("habit_id",e).order("date",{ascending:!1});a&&(t=t.gte("date",a)),n&&(t=t.lte("date",n));let{data:r,error:o}=await t;if(o)throw o;l(r||[])}catch(e){c(e.message),console.error("Error fetching habit logs:",e)}finally{i(!1)}},[e,a,n]);return(0,t.useEffect)(()=>{e&&p()},[e,p]),{logs:o,isLoading:s,error:d,refetch:p}}function n(e,t){let r=new Date,a=new Date(t),n=Math.floor((r.getTime()-a.getTime())/864e5)+1,o=e.filter(e=>"completed"===e.status).length,l=e.filter(e=>"failed"===e.status).length,s=e.filter(e=>"skipped"===e.status).length,i=o+l,d=i>0?Math.round(o/i*100):0,c=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),u=0,p=new Date;for(let e of c){let t=new Date(e.date);if(Math.floor((p.getTime()-t.getTime())/864e5)>1)break;if("completed"===e.status)u++,p=t;else if("failed"===e.status)break}let m=0,f=0;for(let t of[...e].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()))"completed"===t.status?m=Math.max(m,++f):"failed"===t.status&&(f=0);return{totalDays:n,completedDays:o,failedDays:l,skippedDays:s,completionRate:d,currentStreak:u,bestStreak:m}}function o(){let[e,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[s,i]=(0,t.useState)(null),d=(0,r.createClient)(),c=(0,t.useCallback)(async()=>{try{l(!0),i(null);let{data:{user:e}}=await d.auth.getUser();if(!e?.email)return void l(!1);let{data:t,error:r}=await d.from("partnerships").select("user_id, partner_email").eq("partner_email",e.email).eq("status","active");if(r)throw r;if(!t||0===t.length){a([]),l(!1);return}let o=t.map(e=>e.user_id),{data:s,error:c}=await d.from("habits").select("*, habit_logs(*)").in("user_id",o).order("created_at",{ascending:!1});if(c)throw c;let u=new Date().toISOString().split("T")[0],p={};for(let e of s||[]){p[e.user_id]||(p[e.user_id]=[]);let t=e.habit_logs||[],r=t.find(e=>e.date===u),a=n(t,e.start_date||e.created_at);p[e.user_id].push({id:e.id,user_id:e.user_id,title:e.title,description:e.description,created_at:e.created_at,start_date:e.start_date||e.created_at,habit_logs:t,stats:{completionRate:a.completionRate,currentStreak:a.currentStreak,completedDays:a.completedDays,failedDays:a.failedDays},todayStatus:r?.status||"pending",todayReason:r?.reason||null})}let m=o.map(e=>({id:e,email:"Partner",habits:p[e]||[]}));a(m)}catch(e){i(e.message),console.error("Error fetching shared habits:",e)}finally{l(!1)}},[]);return(0,t.useEffect)(()=>{c()},[c]),{partners:e,isLoading:o,error:s,refetch:c}}e.s(["calculateHabitStats",()=>n,"useHabitLogs",()=>a],76371),e.s(["useSharedHabits",()=>o],3991)},83322,64485,41064,7684,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(73375),n=e.i(63059),o=e.i(43531),l=e.i(37727),s=e.i(99023),i=e.i(14683),d=e.i(19455),c=e.i(59438),u=e.i(46798);e.i(92381);var p=e.i(76371);e.i(3991),e.s([],64485);var m=e.i(75157);let f=["Lu","Ma","Mi","Ju","Vi","Sa","Do"];function h({logs:e,startDate:h,onDayClick:x,showStats:g=!0}){let[v,b]=(0,r.useState)(new Date),y=v.getFullYear(),j=v.getMonth(),w=(0,r.useMemo)(()=>{let t={};return e.forEach(e=>{t[e.date]=e}),t},[e]),N=(0,r.useMemo)(()=>(0,p.calculateHabitStats)(e,h),[e,h]),C=(0,r.useMemo)(()=>{let e=new Date(y,j,1),t=new Date(y,j+1,0),r=e.getDay()-1;-1===r&&(r=6);let a=[];for(let e=0;e<r;e++)a.push(null);for(let e=1;e<=t.getDate();e++)a.push(new Date(y,j,e));return a},[y,j]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold",children:[["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][j]," ",y]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{b(new Date)},children:"Hoy"}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{b(new Date(y,j-1,1))},children:(0,t.jsx)(a.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{b(new Date(y,j+1,1))},children:(0,t.jsx)(n.ChevronRight,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[f.map(e=>(0,t.jsx)("div",{className:"text-center text-xs font-medium text-muted-foreground py-2",children:e},e)),(0,t.jsx)(u.TooltipProvider,{children:C.map((e,r)=>{let a,n,d;if(!e)return(0,t.jsx)("div",{className:"aspect-square"},`empty-${r}`);let c=e.toISOString().split("T")[0],p=w[c],f=(a=new Date,e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear()),g=((n=new Date).setHours(0,0,0,0),e>n),v=((d=new Date(h)).setHours(0,0,0,0),e<d),b=g||v;return(0,t.jsxs)(u.Tooltip,{children:[(0,t.jsx)(u.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("button",{onClick:()=>!b&&x?.(c,p),disabled:b,className:(0,m.cn)("aspect-square flex flex-col items-center justify-center rounded-lg border text-sm transition-all","hover:bg-accent/50",f&&"ring-2 ring-primary",b&&"opacity-40 cursor-not-allowed",p&&(e=>{switch(e){case"completed":return"bg-green-500/20 border-green-500/50";case"failed":return"bg-red-500/20 border-red-500/50";case"skipped":return"bg-yellow-500/20 border-yellow-500/50";case"partial":return"bg-blue-500/20 border-blue-500/50";default:return""}})(p.status),!p&&!b&&"border-border/50 hover:border-border"),children:[(0,t.jsx)("span",{className:(0,m.cn)("text-xs",f&&"font-bold"),children:e.getDate()}),p&&(0,t.jsx)("span",{className:"mt-0.5",children:(e=>{switch(e){case"completed":return(0,t.jsx)(o.Check,{className:"w-4 h-4 text-green-500"});case"failed":return(0,t.jsx)(l.X,{className:"w-4 h-4 text-red-500"});case"skipped":return(0,t.jsx)(s.Minus,{className:"w-4 h-4 text-yellow-500"});case"partial":return(0,t.jsx)(i.Circle,{className:"w-4 h-4 text-blue-500"});default:return null}})(p.status)})]})}),p&&(0,t.jsx)(u.TooltipContent,{children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium capitalize",children:p.status}),p.reason&&(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:["RazÃ³n: ",p.reason]})]})})]},c)})})]}),g&&(0,t.jsxs)(c.GlassCard,{className:"mt-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-500",children:N.completedDays}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Completados"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-red-500",children:N.failedDays}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fallados"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-primary",children:[N.completionRate,"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cumplimiento"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-orange-500",children:[N.currentStreak,N.currentStreak>0&&" ðŸ”¥"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Racha actual"})]})]}),N.bestStreak>N.currentStreak&&(0,t.jsxs)("p",{className:"text-center text-xs text-muted-foreground mt-2",children:["Mejor racha: ",N.bestStreak," dÃ­as"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-4 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded bg-green-500/20 border border-green-500/50"}),(0,t.jsx)("span",{children:"Completado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded bg-red-500/20 border border-red-500/50"}),(0,t.jsx)("span",{children:"Fallado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded bg-yellow-500/20 border border-yellow-500/50"}),(0,t.jsx)("span",{children:"Saltado"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded ring-2 ring-primary"}),(0,t.jsx)("span",{children:"Hoy"})]})]})]})}e.s(["HabitCalendar",()=>h],83322);var x=e.i(76639);function g({className:e,...r}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,m.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}var v=e.i(10204);function b({open:e,onOpenChange:a,habitTitle:n,date:i,currentStatus:c,currentReason:u,onSubmit:p}){let[f,h]=(0,r.useState)(c||null),[b,y]=(0,r.useState)(u||""),[j,w]=(0,r.useState)(!1),N=async()=>{if(f){w(!0);try{await p(f,b||void 0),a(!1),h(null),y("")}finally{w(!1)}}},C=[{value:"completed",label:"Completado",icon:(0,t.jsx)(o.Check,{className:"w-5 h-5"}),color:"border-green-500 bg-green-500/20 text-green-500"},{value:"failed",label:"Fallado",icon:(0,t.jsx)(l.X,{className:"w-5 h-5"}),color:"border-red-500 bg-red-500/20 text-red-500"},{value:"skipped",label:"Saltado",icon:(0,t.jsx)(s.Minus,{className:"w-5 h-5"}),color:"border-yellow-500 bg-yellow-500/20 text-yellow-500"}];return(0,t.jsx)(x.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(x.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(x.DialogHeader,{children:[(0,t.jsx)(x.DialogTitle,{children:"Registrar hÃ¡bito"}),(0,t.jsxs)(x.DialogDescription,{children:[(0,t.jsx)("span",{className:"font-medium",children:n}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-xs capitalize",children:new Date(i).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{children:"Â¿CÃ³mo te fue?"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:C.map(e=>(0,t.jsxs)("button",{onClick:()=>h(e.value),className:(0,m.cn)("flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all",f===e.value?e.color:"border-border hover:border-muted-foreground/50"),children:[e.icon,(0,t.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{htmlFor:"reason",children:"failed"===f?"Â¿QuÃ© pasÃ³? (opcional pero recomendado)":"Notas (opcional)"}),(0,t.jsx)(g,{id:"reason",placeholder:"failed"===f?"Ej: Me quedÃ© trabajando hasta tarde...":"AÃ±ade notas sobre este dÃ­a...",value:b,onChange:e=>y(e.target.value),rows:3,className:(0,m.cn)("failed"===f&&"border-red-500/50 focus:border-red-500")}),"failed"===f&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Registrar la razÃ³n te ayuda a identificar patrones y tu accountability partner podrÃ¡ apoyarte mejor."})]})]}),(0,t.jsxs)(x.DialogFooter,{children:[(0,t.jsx)(d.Button,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),(0,t.jsx)(d.Button,{onClick:N,disabled:!f||j,children:j?"Guardando...":"Guardar"})]})]})})}e.s(["HabitLogModal",()=>b],41064);var y=e.i(11795),j=e.i(81140),w=e.i(20783),N=e.i(26330),C=e.i(3536),k=e.i(65491),E=e.i(10772),R=e.i(53660),S=e.i(74606),_=e.i(96626);function D(e){var a;let n,o=(a=e,(n=r.forwardRef((e,t)=>{let{children:a,...n}=e;if(r.isValidElement(a)){var o;let e,l,s=(o=a,(l=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(l=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),i=function(e,t){let r={...t};for(let a in t){let n=e[a],o=t[a];/^on[A-Z]/.test(a)?n&&o?r[a]=(...e)=>{let t=o(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...o}:"className"===a&&(r[a]=[n,o].filter(Boolean).join(" "))}return{...e,...r}}(n,a.props);return a.type!==r.Fragment&&(i.ref=t?(0,w.composeRefs)(t,s):s),r.cloneElement(a,i)}return r.Children.count(a)>1?r.Children.only(null):null})).displayName=`${a}.SlotClone`,n),l=r.forwardRef((e,a)=>{let{children:n,...l}=e,s=r.Children.toArray(n),i=s.find(T);if(i){let e=i.props.children,n=s.map(t=>t!==i?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(o,{...l,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,t.jsx)(o,{...l,ref:a,children:n})});return l.displayName=`${e}.Slot`,l}e.i(74080);var P=Symbol("radix.slottable");function T(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===P}var M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let n=D(`Primitive.${a}`),o=r.forwardRef((e,r)=>{let{asChild:o,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(o?n:a,{...l,ref:r})});return o.displayName=`Primitive.${a}`,{...e,[a]:o}},{}),O=e.i(69340),L=e.i(86312),A=e.i(85369),z="Popover",[F,H]=function(e,a=[]){let n=[],o=()=>{let t=n.map(e=>r.createContext(e));return function(a){let n=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:n}}),[a,n])}};return o.scopeName=e,[function(a,o){let l=r.createContext(o),s=n.length;n=[...n,o];let i=a=>{let{scope:n,children:o,...i}=a,d=n?.[e]?.[s]||l,c=r.useMemo(()=>i,Object.values(i));return(0,t.jsx)(d.Provider,{value:c,children:o})};return i.displayName=a+"Provider",[i,function(t,n){let i=n?.[e]?.[s]||l,d=r.useContext(i);if(d)return d;if(void 0!==o)return o;throw Error(`\`${t}\` must be used within \`${a}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=a.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return a.scopeName=t.scopeName,a}(o,...a)]}(z,[R.createPopperScope]),$=(0,R.createPopperScope)(),[I,B]=F(z),V=e=>{let{__scopePopover:a,children:n,open:o,defaultOpen:l,onOpenChange:s,modal:i=!1}=e,d=$(a),c=r.useRef(null),[u,p]=r.useState(!1),[m,f]=(0,O.useControllableState)({prop:o,defaultProp:l??!1,onChange:s,caller:z});return(0,t.jsx)(R.Root,{...d,children:(0,t.jsx)(I,{scope:a,contentId:(0,E.useId)(),triggerRef:c,open:m,onOpenChange:f,onOpenToggle:r.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:u,onCustomAnchorAdd:r.useCallback(()=>p(!0),[]),onCustomAnchorRemove:r.useCallback(()=>p(!1),[]),modal:i,children:n})})};V.displayName=z;var W="PopoverAnchor";r.forwardRef((e,a)=>{let{__scopePopover:n,...o}=e,l=B(W,n),s=$(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:d}=l;return r.useEffect(()=>(i(),()=>d()),[i,d]),(0,t.jsx)(R.Anchor,{...s,...o,ref:a})}).displayName=W;var q="PopoverTrigger",U=r.forwardRef((e,r)=>{let{__scopePopover:a,...n}=e,o=B(q,a),l=$(a),s=(0,w.useComposedRefs)(r,o.triggerRef),i=(0,t.jsx)(M.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":en(o.open),...n,ref:s,onClick:(0,j.composeEventHandlers)(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?i:(0,t.jsx)(R.Anchor,{asChild:!0,...l,children:i})});U.displayName=q;var Y="PopoverPortal",[Z,G]=F(Y,{forceMount:void 0}),X=e=>{let{__scopePopover:r,forceMount:a,children:n,container:o}=e,l=B(Y,r);return(0,t.jsx)(Z,{scope:r,forceMount:a,children:(0,t.jsx)(_.Presence,{present:a||l.open,children:(0,t.jsx)(S.Portal,{asChild:!0,container:o,children:n})})})};X.displayName=Y;var J="PopoverContent",K=r.forwardRef((e,r)=>{let a=G(J,e.__scopePopover),{forceMount:n=a.forceMount,...o}=e,l=B(J,e.__scopePopover);return(0,t.jsx)(_.Presence,{present:n||l.open,children:l.modal?(0,t.jsx)(ee,{...o,ref:r}):(0,t.jsx)(et,{...o,ref:r})})});K.displayName=J;var Q=D("PopoverContent.RemoveScroll"),ee=r.forwardRef((e,a)=>{let n=B(J,e.__scopePopover),o=r.useRef(null),l=(0,w.useComposedRefs)(a,o),s=r.useRef(!1);return r.useEffect(()=>{let e=o.current;if(e)return(0,L.hideOthers)(e)},[]),(0,t.jsx)(A.RemoveScroll,{as:Q,allowPinchZoom:!0,children:(0,t.jsx)(er,{...e,ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,j.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:(0,j.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;s.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,j.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),et=r.forwardRef((e,a)=>{let n=B(J,e.__scopePopover),o=r.useRef(!1),l=r.useRef(!1);return(0,t.jsx)(er,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(o.current||n.triggerRef.current?.focus(),t.preventDefault()),o.current=!1,l.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(l.current=!0));let r=t.target;n.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&l.current&&t.preventDefault()}})}),er=r.forwardRef((e,r)=>{let{__scopePopover:a,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:s,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:u,...p}=e,m=B(J,a),f=$(a);return(0,C.useFocusGuards)(),(0,t.jsx)(k.FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:l,children:(0,t.jsx)(N.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:(0,t.jsx)(R.Content,{"data-state":en(m.open),role:"dialog",id:m.contentId,...f,...p,ref:r,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ea="PopoverClose";function en(e){return e?"open":"closed"}function eo({...e}){return(0,t.jsx)(V,{"data-slot":"popover",...e})}function el({...e}){return(0,t.jsx)(U,{"data-slot":"popover-trigger",...e})}function es({className:e,align:r="center",sideOffset:a=4,...n}){return(0,t.jsx)(X,{children:(0,t.jsx)(K,{"data-slot":"popover-content",align:r,sideOffset:a,className:(0,m.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...n})})}r.forwardRef((e,r)=>{let{__scopePopover:a,...n}=e,o=B(ea,a);return(0,t.jsx)(M.button,{type:"button",...n,ref:r,onClick:(0,j.composeEventHandlers)(e.onClick,()=>o.onOpenChange(!1))})}).displayName=ea,r.forwardRef((e,r)=>{let{__scopePopover:a,...n}=e,o=$(a);return(0,t.jsx)(R.Arrow,{...o,...n,ref:r})}).displayName="PopoverArrow";var ei=e.i(46696),ed=e.i(75254);let ec=(0,ed.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var eu=e.i(31278);let ep=(0,ed.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),em=(0,ed.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),ef=["ðŸ’ª","ðŸ”¥","â­","ðŸ‘","ðŸŽ¯","ðŸ’¯","ðŸš€","â¤ï¸"],eh=[{emoji:"ðŸ’ª",text:"Â¡TÃº puedes!"},{emoji:"ðŸ”¥",text:"Â¡Sigue asÃ­!"},{emoji:"â­",text:"Â¡Eres increÃ­ble!"},{emoji:"ðŸŽ¯",text:"Â¡Un dÃ­a a la vez!"}];function ex({habitId:e,habitTitle:a,onSent:n}){let[o,l]=(0,r.useState)(!1),[s,i]=(0,r.useState)(""),[c,u]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),h=(0,y.createClient)(),x=async t=>{let r=t||s;if(!r.trim())return void ei.toast.error("Escribe un mensaje");f(!0);try{let{data:{user:t}}=await h.auth.getUser();if(!t?.email)throw Error("No autenticado");let{error:a}=await h.from("encouragements").insert({habit_id:e,from_email:t.email,message:r,emoji:c});if(a)throw a;ei.toast.success("Â¡Mensaje de apoyo enviado!"),i(""),u(null),l(!1),n?.()}catch(e){ei.toast.error(e.message||"Error al enviar")}finally{f(!1)}};return(0,t.jsxs)(eo,{open:o,onOpenChange:l,children:[(0,t.jsx)(el,{asChild:!0,children:(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",className:"gap-2",children:[(0,t.jsx)(ec,{className:"w-4 h-4"}),"Enviar Ã¡nimo"]})}),(0,t.jsx)(es,{className:"w-80",align:"end",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"Enviar apoyo"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Para: ",a]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mensajes rÃ¡pidos:"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:eh.map(e=>(0,t.jsxs)(d.Button,{variant:"outline",size:"sm",className:"justify-start text-xs h-auto py-2",onClick:()=>x(`${e.emoji} ${e.text}`),disabled:p,children:[(0,t.jsx)("span",{className:"mr-1",children:e.emoji}),e.text]},e.text))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"O escribe tu mensaje:"}),(0,t.jsx)("div",{className:"flex gap-1 flex-wrap",children:ef.map(e=>(0,t.jsx)("button",{onClick:()=>u(c===e?null:e),className:(0,m.cn)("w-8 h-8 rounded-lg text-lg hover:bg-accent transition-colors",c===e&&"bg-primary/20 ring-2 ring-primary"),children:e},e))}),(0,t.jsx)(g,{placeholder:"Escribe algo motivador...",value:s,onChange:e=>i(e.target.value),rows:2,className:"resize-none"}),(0,t.jsxs)(d.Button,{onClick:()=>x(),disabled:p||!s.trim(),className:"w-full",size:"sm",children:[p?(0,t.jsx)(eu.Loader2,{className:"w-4 h-4 animate-spin mr-2"}):(0,t.jsx)(ep,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})})]})}function eg({encouragements:e}){return 0===e.length?null:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,t.jsx)(em,{className:"w-4 h-4 text-yellow-500"}),"Mensajes de apoyo (",e.length,")"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:e.map(e=>(0,t.jsx)("div",{className:"p-3 rounded-lg bg-gradient-to-r from-pink-500/10 to-purple-500/10 border border-pink-500/20",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[e.emoji&&(0,t.jsx)("span",{className:"text-lg",children:e.emoji}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm",children:e.message}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["De: ",e.from_email.split("@")[0]," â€¢"," ",new Date(e.created_at).toLocaleDateString("es-ES",{day:"numeric",month:"short"})]})]})]})},e.id))})]})}e.s(["EncouragementList",()=>eg,"SendEncouragement",()=>ex],7684)},58377,e=>{"use strict";let t=(0,e.i(75254).default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]);e.s(["Flame",()=>t],58377)},99018,14197,e=>{"use strict";e.i(83322),e.i(41064),e.i(7684);var t=e.i(43476),r=e.i(75157),a=e.i(58377),n=e.i(75254);let o=(0,n.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),l=(0,n.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var s=e.i(39312);let i=(0,n.default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),d=(0,n.default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var c=e.i(46798);let u=[{minStreak:100,icon:(0,t.jsx)(i,{className:"w-full h-full"}),label:"Leyenda",color:"text-yellow-400",bgColor:"bg-gradient-to-br from-yellow-500/30 to-orange-500/30 border-yellow-500/50"},{minStreak:50,icon:(0,t.jsx)(l,{className:"w-full h-full"}),label:"CampeÃ³n",color:"text-purple-400",bgColor:"bg-gradient-to-br from-purple-500/30 to-pink-500/30 border-purple-500/50"},{minStreak:30,icon:(0,t.jsx)(d,{className:"w-full h-full"}),label:"Imparable",color:"text-blue-400",bgColor:"bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border-blue-500/50"},{minStreak:14,icon:(0,t.jsx)(o,{className:"w-full h-full"}),label:"Estrella",color:"text-green-400",bgColor:"bg-gradient-to-br from-green-500/30 to-emerald-500/30 border-green-500/50"},{minStreak:7,icon:(0,t.jsx)(s.Zap,{className:"w-full h-full"}),label:"En racha",color:"text-orange-400",bgColor:"bg-gradient-to-br from-orange-500/30 to-red-500/30 border-orange-500/50"},{minStreak:3,icon:(0,t.jsx)(a.Flame,{className:"w-full h-full"}),label:"Encendido",color:"text-red-400",bgColor:"bg-gradient-to-br from-red-500/30 to-orange-500/30 border-red-500/50"}];function p({currentStreak:e,bestStreak:a}){let n=Math.max(e,a),o=u.filter(e=>n>=e.minStreak),l=u.find(e=>n<e.minStreak);return 0!==o.length||l?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:"Logros de racha"}),o.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:o.map(e=>(0,t.jsx)(c.TooltipProvider,{children:(0,t.jsxs)(c.Tooltip,{children:[(0,t.jsx)(c.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:(0,r.cn)("w-12 h-12 rounded-full border-2 flex items-center justify-center p-2",e.bgColor,e.color),children:e.icon})}),(0,t.jsxs)(c.TooltipContent,{children:[(0,t.jsx)("p",{className:"font-medium",children:e.label}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Desbloqueado con ",e.minStreak,"+ dÃ­as"]})]})]})},e.label))}),l&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:["PrÃ³ximo logro: ",l.label]}),(0,t.jsxs)("span",{className:"font-medium",children:[n,"/",l.minStreak," dÃ­as"]})]}),(0,t.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:(0,r.cn)("h-full rounded-full transition-all",l.bgColor),style:{width:`${Math.min(n/l.minStreak*100,100)}%`}})})]})]}):null}e.s(["StreakAchievements",()=>p],14197),e.s([],99018)}]);